<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eCards JM</title>
    <!-- Importar Google Fonts para m√°s variedad tipogr√°fica -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@300;400;600;700&family=Lato:wght@300;400;700&family=Montserrat:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&family=Oswald:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Merriweather:wght@300;400;700&family=PT+Sans:wght@400;700&family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Sistema de Login */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .login-container {
            background: white;
            padding: 3rem;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .login-header h1 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 2.5rem;
        }

        .login-header p {
            color: #7f8c8d;
            margin-bottom: 2rem;
        }

        .login-form {
            text-align: left;
        }

        .login-note {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #7f8c8d;
            text-align: center;
        }

        /* Navegaci√≥n */
        .navbar {
            background-color: #2c3e50;
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo h2 {
            color: white;
        }

        .nav-links {
            display: flex;
            list-style: none;
            align-items: center;
            gap: 1.5rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: #34495e;
        }

        .btn-logout {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-logout:hover {
            background: #c0392b;
        }

        /* Secciones */
        .section {
            padding: 2rem 0;
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Hero Section */
        .hero-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
            margin-bottom: 3rem;
        }

        .hero-content h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 1.5rem;
            line-height: 1.3;
        }

        .hero-content p {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .hero-image {
            display: flex;
            justify-content: center;
        }

        /* Card Mockup */
        .card-mockup {
            perspective: 1000px;
        }

        .mockup-card {
            width: 300px;
            height: 400px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transform: rotateY(-5deg) rotateX(5deg);
            transition: transform 0.3s;
        }

        .mockup-card:hover {
            transform: rotateY(0) rotateX(0);
        }

        .mockup-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
        }

        .mockup-logo {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
        }

        .mockup-profile {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
        }

        .mockup-content {
            color: white;
        }

        .mockup-name {
            width: 80%;
            height: 24px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        .mockup-title {
            width: 60%;
            height: 16px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            margin-bottom: 1.5rem;
        }

        .mockup-description {
            width: 100%;
            height: 60px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
        }

        /* Botones */
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            text-decoration: none;
            text-align: center;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
            transform: translateY(-2px);
        }

        .btn-danger {
            background-color: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        /* Formularios */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e8ed;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Secci√≥n de Creaci√≥n */
        .creation-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 2rem;
        }

        .creation-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        /* Personalizaci√≥n */
        .customization-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .customization-section h3 {
            margin-bottom: 1rem;
            color: #2c3e50;
        }

        .color-grid, .typography-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .color-group, .typography-group {
            display: flex;
            flex-direction: column;
        }

        .color-group label, .typography-group label {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .color-group input[type="color"] {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .typography-group select, .typography-group input {
            padding: 0.5rem;
            border: 2px solid #e1e8ed;
            border-radius: 5px;
        }

        /* Subida de archivos */
        .file-input-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: #ecf0f1;
            color: #2c3e50;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 2px dashed #bdc3c7;
        }

        .file-input-btn:hover {
            background-color: #d5dbdb;
        }

        .preview-container {
            margin-top: 1rem;
            text-align: center;
        }

        .preview-image {
            max-width: 150px;
            max-height: 150px;
            object-fit: cover;
            border: 2px solid #e1e8ed;
        }

        /* Vista Previa de Tarjeta */
        .card-preview {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 400px;
            margin: 0 auto;
            transition: all 0.3s;
            min-height: 650px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* Header con logo a la derecha y foto a la izquierda */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .card-profile-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .card-logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 1rem;
        }

        /* Estructura mejorada para la foto de perfil */
        .media-thumbnail {
            display: inline-block;
            position: relative;
            overflow: hidden;
        }

        .avatar {
            display: block;
            max-width: 100%;
            height: auto;
        }

        .img-rounded {
            border-radius: 6px;
        }

        .media-size-avatar {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border: 3px solid #3498db;
            transition: all 0.3s;
        }

        .card-profile-img.circular {
            border-radius: 50%;
        }

        .card-profile-img.square {
            border-radius: 10px;
        }

        .card-logo {
            max-width: 80px;
            max-height: 80px;
            object-fit: contain;
        }

        .card-content {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .card-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .card-title {
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }

        .card-company {
            color: #3498db;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .card-description {
            margin: 1rem 0;
            text-align: left;
        }

        /* Botones de Contacto */
        .contact-buttons-block {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin: 1.5rem 0;
        }

        .contact-button {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: #f8f9fa;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .contact-button:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .contact-icon {
            width: 20px;
            height: 20px;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }

        .icon-chevron-right {
            margin-left: auto;
            font-style: normal;
        }

        .icon-chevron-right:before { content: "‚Ä∫"; font-weight: bold; }

        /* Estructura de Redes Sociales con SVG */
        .social-media-block {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .social-media-icon {
            width: 40px;
            height: 40px;
            transition: all 0.3s;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(52, 152, 219, 0.1);
        }

        .social-media-icon:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }
        
        .card-url {
            text-align: center;
            padding: 1rem;
            background: #ecf0f1;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .card-url span {
            font-weight: bold;
            color: #3498db;
        }

        /* Tabla de Tarjetas */
        .table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .cards-table {
            width: 100%;
            border-collapse: collapse;
        }

        .cards-table th, .cards-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e1e8ed;
        }

        .cards-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .cards-table tr:hover {
            background-color: #f8f9fa;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        /* Botones de formulario */
        .form-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        /* Secci√≥n de Visualizaci√≥n de Tarjeta */
        .card-display-wrapper {
            max-width: 400px;
            margin: 2rem auto;
            padding: 1rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-section {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .creation-container {
                grid-template-columns: 1fr;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .color-grid, .typography-grid {
                grid-template-columns: 1fr;
            }
            
            .table-container {
                overflow-x: auto;
            }
            
            .login-container {
                padding: 2rem;
                margin: 1rem;
            }
            
            .hero-content h1 {
                font-size: 2rem;
            }
            
            .card-header {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }
            
            .card-profile-section, .card-logo-section {
                align-items: center;
            }
            
            .form-buttons {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .card-preview {
                margin: 0 10px;
            }
            
            .contact-button {
                font-size: 0.8rem;
                padding: 0.75rem;
            }
            
            .social-media-block {
                gap: 0.5rem;
            }
            
            .social-media-icon {
                width: 32px;
                height: 32px;
            }
        }
    </style>
</head>
<body>
    <!-- Sistema de Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>eCards JM</h1>
                <p>Tarjetas de Presentaci√≥n Digital</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="password">Contrase√±a de Acceso</label>
                    <input type="password" id="password" required placeholder="Ingrese la contrase√±a">
                </div>
                <button type="submit" class="btn btn-primary">Acceder</button>
                <p class="login-note">Contrase√±a por defecto: admin123</p>
            </form>
        </div>
    </div>

    <!-- Aplicaci√≥n Principal -->
    <div id="app" class="app" style="display: none;">
        <!-- Navegaci√≥n -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <h2>eCards JM</h2>
                </div>
                <ul class="nav-links">
                    <li><a href="#" class="nav-link active" data-target="home">Inicio</a></li>
                    <li><a href="#" class="nav-link" data-target="my-cards">Mis Tarjetas</a></li>
                    <li><button id="logoutBtn" class="btn-logout">Cerrar Sesi√≥n</button></li>
                </ul>
            </div>
        </nav>

        <!-- Contenido Principal -->
        <div class="container">
            <!-- Secci√≥n Inicio -->
            <section id="home" class="section active">
                <div class="hero-section">
                    <div class="hero-content">
                        <h1>Crea una tarjeta de presentaci√≥n digital optimizada para dispositivos m√≥viles para ti o su personal</h1>
                        <p>eCards JM te permite crear una tarjeta de presentaci√≥n digital para ti o los empleados de tu empresa, con una direcci√≥n de p√°gina web √∫nica y un dise√±o simple y responsivo optimizado para ver en dispositivos m√≥viles.</p>
                        <button class="btn btn-primary" id="startCreatingBtn">Comenzar a Crear</button>
                    </div>
                    <div class="hero-image">
                        <div class="card-mockup">
                            <div class="mockup-card">
                                <div class="mockup-header">
                                    <div class="mockup-logo"></div>
                                    <div class="mockup-profile"></div>
                                </div>
                                <div class="mockup-content">
                                    <div class="mockup-name"></div>
                                    <div class="mockup-title"></div>
                                    <div class="mockup-description"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Formulario de Creaci√≥n -->
                <div class="creation-section" id="creationSection" style="display: none;">
                    <div class="creation-container">
                        <div class="form-column">
                            <h2 id="formTitle">Crear Nueva Tarjeta</h2>
                            <form id="cardForm" class="card-form">
                                <div class="form-group">
                                    <label for="name">Nombre Completo</label>
                                    <input type="text" id="name" placeholder="Opcional">
                                </div>
                                
                                <div class="form-group">
                                    <label for="title">T√≠tulo/Cargo</label>
                                    <input type="text" id="title" placeholder="Opcional">
                                </div>
                                
                                <div class="form-group">
                                    <label for="company">Empresa</label>
                                    <input type="text" id="company" placeholder="Opcional">
                                </div>
                                
                                <div class="form-group">
                                    <label for="description">Descripci√≥n</label>
                                    <textarea id="description" placeholder="Opcional"></textarea>
                                </div>

                                <!-- Informaci√≥n de Contacto -->
                                <div class="customization-section">
                                    <h3>Informaci√≥n de Contacto</h3>
                                    <div class="form-group">
                                        <label for="phone">Tel√©fono Fijo</label>
                                        <input type="tel" id="phone" placeholder="Ej: 418 7446">
                                    </div>
                                    <div class="form-group">
                                        <label for="mobile">Tel√©fono M√≥vil</label>
                                        <input type="tel" id="mobile" placeholder="Ej: 3116070554 - 3014346788">
                                    </div>
                                    <div class="form-group">
                                        <label for="email">Correo Electr√≥nico</label>
                                        <input type="email" id="email" placeholder="Ej: contacto@empresa.com">
                                    </div>
                                    <div class="form-group">
                                        <label for="address">Direcci√≥n</label>
                                        <input type="text" id="address" placeholder="Ej: Calle 45 #6-60, Medell√≠n">
                                    </div>
                                </div>

                                <!-- Redes Sociales -->
                                <div class="customization-section">
                                    <h3>Redes Sociales</h3>
                                    <div class="form-group">
                                        <label for="website">Sitio Web</label>
                                        <input type="url" id="website" placeholder="https://tusitio.com">
                                    </div>
                                    <div class="form-group">
                                        <label for="linkedin">LinkedIn</label>
                                        <input type="url" id="linkedin" placeholder="https://linkedin.com/in/tuperfil">
                                    </div>
                                    <div class="form-group">
                                        <label for="facebook">Facebook</label>
                                        <input type="url" id="facebook" placeholder="https://facebook.com/tuperfil">
                                    </div>
                                    <div class="form-group">
                                        <label for="instagram">Instagram</label>
                                        <input type="url" id="instagram" placeholder="https://instagram.com/tuperfil">
                                    </div>
                                    <div class="form-group">
                                        <label for="twitter">Twitter/X</label>
                                        <input type="url" id="twitter" placeholder="https://twitter.com/tuperfil">
                                    </div>
                                    <div class="form-group">
                                        <label for="youtube">YouTube</label>
                                        <input type="url" id="youtube" placeholder="https://youtube.com/tucanal">
                                    </div>
                                    <div class="form-group">
                                        <label for="whatsapp">WhatsApp</label>
                                        <input type="tel" id="whatsapp" placeholder="Ej: 573116070554">
                                    </div>
                                </div>

                                <!-- Personalizaci√≥n de Im√°genes -->
                                <div class="customization-section">
                                    <h3>Personalizaci√≥n de Im√°genes</h3>
                                    <div class="form-group">
                                        <label for="profileShape">Forma de la Foto de Perfil</label>
                                        <select id="profileShape">
                                            <option value="circular">Circular</option>
                                            <option value="square">Cuadrado</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="profileSize">Tama√±o de la Foto (px)</label>
                                        <input type="number" id="profileSize" min="80" max="250" value="150">
                                    </div>
                                </div>

                                <!-- Personalizaci√≥n de Colores -->
                                <div class="customization-section">
                                    <h3>Personalizaci√≥n de Colores</h3>
                                    <div class="color-grid">
                                        <div class="color-group">
                                            <label for="cardBackground">Fondo de Tarjeta</label>
                                            <input type="color" id="cardBackground" value="#ffffff">
                                        </div>
                                        <div class="color-group">
                                            <label for="textPrimary">Texto Principal</label>
                                            <input type="color" id="textPrimary" value="#2c3e50">
                                        </div>
                                        <div class="color-group">
                                            <label for="textSecondary">Texto Secundario</label>
                                            <input type="color" id="textSecondary" value="#7f8c8d">
                                        </div>
                                        <div class="color-group">
                                            <label for="accentColor">Color de Acento</label>
                                            <input type="color" id="accentColor" value="#3498db">
                                        </div>
                                    </div>
                                </div>

                                <!-- Personalizaci√≥n de Tipograf√≠a MEJORADA -->
                                <div class="customization-section">
                                    <h3>Personalizaci√≥n de Tipograf√≠a</h3>
                                    <div class="typography-grid">
                                        <div class="typography-group">
                                            <label for="fontFamily">Familia de Fuente</label>
                                            <select id="fontFamily">
                                                <option value="Arial, sans-serif">Arial</option>
                                                <option value="Georgia, serif">Georgia</option>
                                                <option value="'Courier New', monospace">Courier New</option>
                                                <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
                                                <option value="'Helvetica Neue', Helvetica, sans-serif">Helvetica</option>
                                                <!-- Nuevas fuentes de Google Fonts -->
                                                <option value="'Roboto', sans-serif">Roboto</option>
                                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                                <option value="'Lato', sans-serif">Lato</option>
                                                <option value="'Montserrat', sans-serif">Montserrat</option>
                                                <option value="'Poppins', sans-serif">Poppins</option>
                                                <option value="'Raleway', sans-serif">Raleway</option>
                                                <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
                                                <option value="'Oswald', sans-serif">Oswald</option>
                                                <option value="'Playfair Display', serif">Playfair Display</option>
                                                <option value="'Merriweather', serif">Merriweather</option>
                                                <option value="'PT Sans', sans-serif">PT Sans</option>
                                                <option value="'Ubuntu', sans-serif">Ubuntu</option>
                                            </select>
                                        </div>
                                        <div class="typography-group">
                                            <label for="nameSize">Tama√±o Nombre (px)</label>
                                            <input type="number" id="nameSize" min="16" max="32" value="24">
                                        </div>
                                        <div class="typography-group">
                                            <label for="titleSize">Tama√±o T√≠tulo (px)</label>
                                            <input type="number" id="titleSize" min="12" max="20" value="16">
                                        </div>
                                        <div class="typography-group">
                                            <label for="descriptionSize">Tama√±o Descripci√≥n (px)</label>
                                            <input type="number" id="descriptionSize" min="12" max="18" value="14">
                                        </div>
                                    </div>
                                    <!-- Secci√≥n para cargar fuentes personalizadas -->
                                    <div class="form-group" style="margin-top: 1rem;">
                                        <label for="customFontFile">Subir Fuente Personalizada</label>
                                        <div class="file-input-container">
                                            <div class="file-input-btn">Seleccionar Archivo de Fuente</div>
                                            <input type="file" id="customFontFile" class="file-input" accept=".ttf,.otf,.woff,.woff2">
                                        </div>
                                        <small style="color: #7f8c8d; font-size: 0.8rem;">Formatos soportados: .ttf, .otf, .woff, .woff2</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="customFont">O usar URL de Fuente Web</label>
                                        <input type="url" id="customFont" placeholder="https://fonts.googleapis.com/css2?family=TuFuente">
                                        <small style="color: #7f8c8d; font-size: 0.8rem;">Pega la URL de Google Fonts o cualquier fuente web</small>
                                    </div>
                                </div>

                                <!-- Subida de Archivos -->
                                <div class="file-upload-section">
                                    <div class="form-group">
                                        <label>Logo de la empresa</label>
                                        <div class="file-input-container">
                                            <div class="file-input-btn">Seleccionar Logo</div>
                                            <input type="file" id="logo" class="file-input" accept="image/*">
                                        </div>
                                        <div class="preview-container">
                                            <img id="logoPreview" class="preview-image" style="display: none;">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Foto de perfil</label>
                                        <div class="file-input-container">
                                            <div class="file-input-btn">Seleccionar Foto</div>
                                            <input type="file" id="profileImage" class="file-input" accept="image/*">
                                        </div>
                                        <div class="preview-container">
                                            <img id="profilePreview" class="preview-image" style="display: none; max-width: 200px; max-height: 200px;">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-buttons">
                                    <button type="submit" class="btn btn-primary" id="submitButton">Crear Tarjeta</button>
                                    <button type="button" class="btn btn-secondary" id="cancelEditButton" style="display: none;">Cancelar Edici√≥n</button>
                                </div>
                            </form>
                        </div>
                        
                        <div class="preview-column">
                            <h3>Vista Previa</h3>
                            <div id="cardPreview" class="card-preview">
                                <!-- NUEVA ESTRUCTURA: Logo a la derecha, foto a la izquierda -->
                                <div class="card-header">
                                    <div class="card-profile-section">
                                        <!-- ESTRUCTURA MEJORADA PARA LA FOTO DE PERFIL -->
                                        <span class="media-thumbnail avatar img-rounded media-size-avatar">
                                            <img id="previewProfile" class="avatar img-rounded media-size-avatar" src="" alt="Foto de perfil" style="display: none;">
                                        </span>
                                    </div>
                                    <div class="card-logo-section">
                                        <img id="previewLogo" class="card-logo" src="" alt="Logo" style="display: none;">
                                    </div>
                                </div>
                                
                                <div class="card-content">
                                    <h2 id="previewName" class="card-name">Nombre Completo</h2>
                                    <p id="previewTitle" class="card-title">T√≠tulo/Cargo</p>
                                    <p id="previewCompany" class="card-company">Empresa</p>
                                    <div class="card-description">
                                        <p id="previewDescription">Descripci√≥n de la empresa o usuario aparecer√° aqu√≠.</p>
                                    </div>
                                </div>
                                
                                <!-- Botones de Contacto -->
                                <div class="contact-buttons-block" id="previewContactButtons">
                                    <!-- Los botones de contacto se generar√°n aqu√≠ din√°micamente -->
                                </div>

                                <!-- NUEVA ESTRUCTURA: Redes Sociales con SVG -->
                                <div class="social-media-block" id="previewSocialMedia">
                                    <!-- Las redes sociales se mostrar√°n aqu√≠ con SVG -->
                                </div>
                                
                                <div class="card-url">
                                    <p>Comparte tu tarjeta: <span id="previewUrl">url-unica</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Secci√≥n Mis Tarjetas -->
            <section id="my-cards" class="section">
                <h1>Mis Tarjetas</h1>
                <p>Administra tus tarjetas de presentaci√≥n digital.</p>
                
                <div class="table-container">
                    <table class="cards-table">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>URL</th>
                                <th>A√±adido</th>
                                <th>√öltima actualizaci√≥n</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="cardsTableBody">
                            <!-- Las tarjetas se cargar√°n aqu√≠ din√°micamente -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- NUEVA SECCI√ìN: Visualizaci√≥n de Tarjetas -->
            <section id="card-view" class="section">
                <div id="cardDisplayContainer">
                    <!-- La tarjeta se mostrar√° aqu√≠ cuando se acceda por URL -->
                </div>
            </section>
        </div>
    </div>

    <script>
        // JAVASCRIPT COMPLETO CON CORRECCIONES
        const CONFIG = {
            PASSWORD: 'admin123',
            SESSION_KEY: 'evaunt_session',
            CARDS_KEY: 'evaunt_cards'
        };

        let currentUser = null;
        let cards = [];
        let editingCardId = null;

        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM cargado - Inicializando aplicaci√≥n...');
            initializeApp();
            
            // Manejar el enrutamiento basado en el hash
            window.addEventListener('hashchange', handleRoute);
            handleRoute(); // Manejar la ruta actual al cargar
        });

        function initializeApp() {
            console.log('Inicializando aplicaci√≥n...');
            if (!document.getElementById('loginScreen') || !document.getElementById('app')) {
                console.error('Elementos del DOM no encontrados');
                setTimeout(initializeApp, 100);
                return;
            }
            
            checkSession();
            loadCards();
            setupEventListeners();
            setupDefaultDesign();
            updateCardsTable();
            updateCardPreview();
        }

        // Manejar rutas basadas en hash
        function handleRoute() {
            const hash = window.location.hash.substring(1); // Eliminar el #
            
            if (!hash || hash === 'home') {
                // Si no hay hash o es 'home', mostrar la secci√≥n por defecto
                if (currentUser && currentUser.loggedIn) {
                    showHomeSection();
                } else {
                    showLogin();
                }
                return;
            }

            if (hash === 'my-cards') {
                if (currentUser && currentUser.loggedIn) {
                    showMyCardsSection();
                } else {
                    showLogin();
                }
                return;
            }

            // Verificar si es una URL de tarjeta
            const card = findCardByUrl(hash);
            if (card) {
                displayCard(card);
                return;
            }

            // Si no es una ruta conocida, mostrar p√°gina no encontrada
            showNotFound();
        }

        // Encontrar tarjeta por URL
        function findCardByUrl(url) {
            return cards.find(card => {
                const cardUrl = card.url;
                return cardUrl === url;
            });
        }

        // Mostrar tarjeta cuando se accede por URL
        function displayCard(card) {
            if (currentUser && currentUser.loggedIn) {
                showApp();
            } else {
                showLogin();
                // Guardar la tarjeta para mostrar despu√©s del login
                sessionStorage.setItem('pendingCardView', JSON.stringify(card));
                return;
            }

            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar secci√≥n de visualizaci√≥n de tarjeta
            const cardViewSection = document.getElementById('card-view');
            if (cardViewSection) {
                cardViewSection.classList.add('active');
                
                // Actualizar navegaci√≥n
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                // Renderizar la tarjeta
                renderCardForDisplay(card);
            }
        }

        // Renderizar tarjeta para visualizaci√≥n p√∫blica
        function renderCardForDisplay(card) {
            const container = document.getElementById('cardDisplayContainer');
            if (!container) return;

            // Cargar fuente personalizada si existe
            if (card.design?.customFont) {
                loadCustomFontFromUrl(card.design.customFont, card.design.fontFamily);
            }

            container.innerHTML = `
                <div class="card-display-wrapper">
                    <div class="card-preview" style="background: ${card.design?.cardBackground || '#ffffff'}; color: ${card.design?.textPrimary || '#2c3e50'}; font-family: ${card.design?.fontFamily || 'Arial, sans-serif'};">
                        <div class="card-header">
                            <div class="card-profile-section">
                                ${card.profileImage ? `<img src="${card.profileImage}" class="avatar img-rounded media-size-avatar" style="width: 150px; height: 150px; border-radius: ${card.design?.profileShape === 'circular' ? '50%' : '10px'}; border: 3px solid ${card.design?.accentColor || '#3498db'}; object-fit: cover;">` : '<div style="width: 150px; height: 150px; background: #ecf0f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #7f8c8d;">Sin foto</div>'}
                            </div>
                            <div class="card-logo-section">
                                ${card.logo ? `<img src="${card.logo}" class="card-logo" style="max-width: 80px; max-height: 80px; object-fit: contain;">` : ''}
                            </div>
                        </div>
                        
                        <div class="card-content">
                            <h2 class="card-name" style="font-size: ${card.design?.nameSize || '24'}px; color: ${card.design?.textPrimary || '#2c3e50'};">${card.name || 'Nombre Completo'}</h2>
                            <p class="card-title" style="font-size: ${card.design?.titleSize || '16'}px; color: ${card.design?.textSecondary || '#7f8c8d'};">${card.title || 'T√≠tulo/Cargo'}</p>
                            <p class="card-company" style="color: ${card.design?.accentColor || '#3498db'};">${card.company || 'Empresa'}</p>
                            <div class="card-description">
                                <p style="font-size: ${card.design?.descriptionSize || '14'}px; color: ${card.design?.textPrimary || '#2c3e50'};">${card.description || 'Descripci√≥n de la empresa o usuario aparecer√° aqu√≠.'}</p>
                            </div>
                        </div>
                        
                        <div class="contact-buttons-block">
                            ${generateContactButtons(card)}
                        </div>

                        <div class="social-media-block">
                            ${generateSocialMediaIcons(card)}
                        </div>
                        
                        <div class="card-url">
                            <p>Comparte esta tarjeta: <span style="font-weight: bold; color: ${card.design?.accentColor || '#3498db'};">${window.location.href}</span></p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button onclick="showHomeSection()" class="btn btn-primary">Crear tu propia tarjeta</button>
                    </div>
                </div>
            `;
        }

        // Generar botones de contacto para visualizaci√≥n
        function generateContactButtons(card) {
            const contacts = [];
            const accentColor = card.design?.accentColor || '#3498db';
            
            if (card.phone) {
                contacts.push(`<a href="tel:${card.phone.replace(/\s/g, '')}" class="contact-button" style="border-color: ${accentColor};">
                    <span style="display: flex; align-items: center;">
                        <span style="margin-right: 0.75rem;">üìû</span>
                        <span>Tel√©fono: ${card.phone}</span>
                    </span>
                    <span class="icon-chevron-right"></span>
                </a>`);
            }
            
            if (card.mobile) {
                contacts.push(`<a href="tel:${card.mobile.replace(/\s/g, '')}" class="contact-button" style="border-color: ${accentColor};">
                    <span style="display: flex; align-items: center;">
                        <span style="margin-right: 0.75rem;">üì±</span>
                        <span>M√≥vil: ${card.mobile}</span>
                    </span>
                    <span class="icon-chevron-right"></span>
                </a>`);
            }
            
            if (card.email) {
                contacts.push(`<a href="mailto:${card.email}" class="contact-button" style="border-color: ${accentColor};">
                    <span style="display: flex; align-items: center;">
                        <span style="margin-right: 0.75rem;">‚úâÔ∏è</span>
                        <span>Email: ${card.email}</span>
                    </span>
                    <span class="icon-chevron-right"></span>
                </a>`);
            }
            
            if (card.address) {
                contacts.push(`<a href="https://maps.google.com/?q=${encodeURIComponent(card.address)}" target="_blank" class="contact-button" style="border-color: ${accentColor};">
                    <span style="display: flex; align-items: center;">
                        <span style="margin-right: 0.75rem;">üìç</span>
                        <span>Direcci√≥n: ${card.address}</span>
                    </span>
                    <span class="icon-chevron-right"></span>
                </a>`);
            }
            
            return contacts.length > 0 ? contacts.join('') : '<p style="text-align: center; color: #7f8c8d;">No hay informaci√≥n de contacto</p>';
        }

        // Generar iconos de redes sociales para visualizaci√≥n
        function generateSocialMediaIcons(card) {
            const socialIcons = [];
            const accentColor = card.design?.accentColor || '#3498db';
            
            const websiteIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="${accentColor}" stroke-width="2"/><path d="M2 12H22" stroke="${accentColor}" stroke-width="2"/><path d="M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22C9.49872 19.2616 8.07725 15.708 8 12C8.07725 8.29203 9.49872 4.73835 12 2V2Z" stroke="${accentColor}" stroke-width="2"/></svg>`;

            const linkedinIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 8C17.5913 8 19.1174 8.63214 20.2426 9.75736C21.3679 10.8826 22 12.4087 22 14V21H18V14C18 13.4696 17.7893 12.9609 17.4142 12.5858C17.0391 12.2107 16.5304 12 16 12C15.4696 12 14.9609 12.2107 14.5858 12.5858C14.2107 12.9609 14 13.4696 14 14V21H10V14C10 12.4087 10.6321 10.8826 11.7574 9.75736C12.8826 8.63214 14.4087 8 16 8Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 9H2V21H6V9Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 6C5.10457 6 6 5.10457 6 4C6 2.89543 5.10457 2 4 2C2.89543 2 2 2.89543 2 4C2 5.10457 2.89543 6 4 6Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            const facebookIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            const instagramIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17 2H7C4.23858 2 2 4.23858 2 7V17C2 19.7614 4.23858 21 7 21H17C19.7614 21 21 19.7614 21 17V7C21 4.23858 19.7614 2 17 2Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 11.37C16.1234 12.2022 15.9813 13.0522 15.5938 13.799C15.2063 14.5458 14.5932 15.1514 13.8416 15.5297C13.0901 15.9079 12.2385 16.0396 11.4078 15.9059C10.5771 15.7723 9.80977 15.3801 9.21485 14.7852C8.61993 14.1902 8.22774 13.4229 8.09408 12.5922C7.96042 11.7615 8.09208 10.9099 8.47034 10.1584C8.8486 9.40685 9.4542 8.79374 10.201 8.40624C10.9478 8.01874 11.7978 7.87659 12.63 8C13.4789 8.12588 14.2649 8.52146 14.8717 9.1283C15.4785 9.73515 15.8741 10.5211 16 11.37Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M17.5 6.5H17.51" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            const twitterIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23 3C22.0424 3.67548 20.9821 4.19211 19.86 4.53C19.2577 3.83751 18.4573 3.34669 17.567 3.12393C16.6767 2.90116 15.7395 2.9572 14.8821 3.28445C14.0247 3.61171 13.2884 4.1944 12.773 4.95372C12.2575 5.71303 11.9877 6.61234 12 7.53V8.53C10.2426 8.57557 8.50127 8.18581 6.93101 7.39545C5.36074 6.60508 4.01032 5.43864 3 4C3 4 -1 13 8 17C5.94053 18.398 3.48716 19.0989 1 19C10 24 21 19 21 7.5C20.9991 7.22145 20.9723 6.94359 20.92 6.67C21.9406 5.66349 22.6608 4.39271 23 3V3Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            const youtubeIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.54 6.42C22.4212 5.94541 22.1793 5.51057 21.8387 5.15941C21.4981 4.80824 21.0708 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.12 4 3.4 4.46C2.92925 4.59318 2.50193 4.84824 2.1613 5.19941C1.82068 5.55057 1.57875 5.98541 1.46 6.46C1.14521 8.20556 0.991236 9.97631 1 11.75C0.991236 13.5237 1.14521 15.2944 1.46 17.04C1.59096 17.4848 1.8383 17.8836 2.17814 18.1995C2.51799 18.5154 2.93882 18.7375 3.4 18.84C5.12 19.3 12 19.3 12 19.3C12 19.3 18.88 19.3 20.6 18.84C21.0708 18.7068 21.4981 18.4518 21.8387 18.1006C22.1793 17.7494 22.4212 17.3146 22.54 16.84C22.8524 15.0944 23.0063 13.3237 22.9987 11.55C23.0223 9.77197 22.8683 7.99611 22.54 6.42V6.42Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M9.75 15.02L15.5 11.75L9.75 8.48V15.02Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            const whatsappIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3944 16.7118 18.3098 17.8992 16.9674 18.7293C15.6251 19.5594 14.0782 19.9994 12.5 20C11.1801 20.0035 9.87812 19.6951 8.7 19.1L3 21L4.9 15.3C4.30493 14.1219 3.99656 12.8199 4 11.5C4.00061 9.92179 4.44061 8.37488 5.27072 7.03258C6.10083 5.69028 7.28825 4.6056 8.7 3.90003C9.87812 3.30496 11.1801 2.99659 12.5 3.00003H13C15.0843 3.11502 17.053 3.99479 18.5291 5.47089C20.0052 6.94699 20.885 8.91568 21 11V11.5Z" stroke="${accentColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            if (card.website) {
                socialIcons.push(`<a href="${card.website}" target="_blank" class="social-media-icon" title="Sitio Web">${websiteIcon}</a>`);
            }
            
            if (card.linkedin) {
                socialIcons.push(`<a href="${card.linkedin}" target="_blank" class="social-media-icon" title="LinkedIn">${linkedinIcon}</a>`);
            }
            
            if (card.facebook) {
                socialIcons.push(`<a href="${card.facebook}" target="_blank" class="social-media-icon" title="Facebook">${facebookIcon}</a>`);
            }
            
            if (card.instagram) {
                socialIcons.push(`<a href="${card.instagram}" target="_blank" class="social-media-icon" title="Instagram">${instagramIcon}</a>`);
            }
            
            if (card.twitter) {
                socialIcons.push(`<a href="${card.twitter}" target="_blank" class="social-media-icon" title="Twitter/X">${twitterIcon}</a>`);
            }
            
            if (card.youtube) {
                socialIcons.push(`<a href="${card.youtube}" target="_blank" class="social-media-icon" title="YouTube">${youtubeIcon}</a>`);
            }
            
            if (card.whatsapp) {
                socialIcons.push(`<a href="https://wa.me/${card.whatsapp}" target="_blank" class="social-media-icon" title="WhatsApp">${whatsappIcon}</a>`);
            }

            return socialIcons.length > 0 ? socialIcons.join('') : '<p style="text-align: center; color: #7f8c8d; width: 100%;">No hay redes sociales</p>';
        }

        // Mostrar secci√≥n de inicio
        function showHomeSection() {
            window.location.hash = 'home';
            switchSection('home');
        }

        // Mostrar secci√≥n de mis tarjetas
        function showMyCardsSection() {
            window.location.hash = 'my-cards';
            switchSection('my-cards');
        }

        // Mostrar p√°gina no encontrada
        function showNotFound() {
            if (currentUser && currentUser.loggedIn) {
                showHomeSection();
            } else {
                showLogin();
            }
            alert('Tarjeta no encontrada');
        }

        function setupDefaultDesign() {
            const elements = [
                'cardBackground', 'textPrimary', 'textSecondary', 'accentColor',
                'fontFamily', 'nameSize', 'titleSize', 'descriptionSize',
                'profileShape', 'profileSize'
            ];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    switch(id) {
                        case 'cardBackground': element.value = '#ffffff'; break;
                        case 'textPrimary': element.value = '#2c3e50'; break;
                        case 'textSecondary': element.value = '#7f8c8d'; break;
                        case 'accentColor': element.value = '#3498db'; break;
                        case 'fontFamily': element.value = 'Arial, sans-serif'; break;
                        case 'nameSize': element.value = '24'; break;
                        case 'titleSize': element.value = '16'; break;
                        case 'descriptionSize': element.value = '14'; break;
                        case 'profileShape': element.value = 'circular'; break;
                        case 'profileSize': element.value = '150'; break;
                    }
                }
            });
        }

        function checkSession() {
            const session = localStorage.getItem(CONFIG.SESSION_KEY);
            if (session) {
                try {
                    currentUser = JSON.parse(session);
                    if (currentUser && currentUser.loggedIn) {
                        // Verificar si hay una tarjeta pendiente por mostrar despu√©s del login
                        const pendingCard = sessionStorage.getItem('pendingCardView');
                        if (pendingCard) {
                            const card = JSON.parse(pendingCard);
                            sessionStorage.removeItem('pendingCardView');
                            displayCard(card);
                        } else {
                            showApp();
                        }
                        return;
                    }
                } catch (e) {
                    console.error('Error parsing session:', e);
                    localStorage.removeItem(CONFIG.SESSION_KEY);
                }
            }
            showLogin();
        }

        function showLogin() {
            const loginScreen = document.getElementById('loginScreen');
            const app = document.getElementById('app');
            
            if (loginScreen) loginScreen.style.display = 'flex';
            if (app) app.style.display = 'none';
        }

        function showApp() {
            const loginScreen = document.getElementById('loginScreen');
            const app = document.getElementById('app');
            
            if (loginScreen) loginScreen.style.display = 'none';
            if (app) app.style.display = 'block';
        }

        function setupEventListeners() {
            // Login
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }

            // Logout
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', handleLogout);
            }

            // Navegaci√≥n
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('data-target');
                    switchSection(target);
                });
            });

            // Bot√≥n para comenzar a crear
            const startCreatingBtn = document.getElementById('startCreatingBtn');
            if (startCreatingBtn) {
                startCreatingBtn.addEventListener('click', function() {
                    document.getElementById('creationSection').style.display = 'block';
                    this.style.display = 'none';
                    document.querySelector('.hero-section').style.display = 'none';
                    resetForm();
                });
            }

            // Formulario de tarjeta
            const cardForm = document.getElementById('cardForm');
            if (cardForm) {
                cardForm.addEventListener('submit', handleCardSubmit);
            }

            // Cancelar edici√≥n
            const cancelEditBtn = document.getElementById('cancelEditButton');
            if (cancelEditBtn) {
                cancelEditBtn.addEventListener('click', function() {
                    resetForm();
                });
            }

            // Inputs de archivo
            const logoInput = document.getElementById('logo');
            if (logoInput) {
                logoInput.addEventListener('change', function() {
                    previewImage(this, 'logoPreview');
                });
            }

            const profileInput = document.getElementById('profileImage');
            if (profileInput) {
                profileInput.addEventListener('change', function() {
                    previewImage(this, 'profilePreview');
                });
            }

            // Event listeners para actualizar la vista previa
            const previewInputs = [
                'name', 'title', 'company', 'description',
                'phone', 'mobile', 'email', 'address',
                'website', 'linkedin', 'facebook', 'instagram', 'twitter', 'youtube', 'whatsapp',
                'cardBackground', 'textPrimary', 'textSecondary', 'accentColor',
                'fontFamily', 'nameSize', 'titleSize', 'descriptionSize',
                'profileShape', 'profileSize', 'customFont'
            ];

            previewInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', updateCardPreview);
                    element.addEventListener('change', updateCardPreview);
                }
            });

            // Event listener para subir archivos de fuentes
            const customFontInput = document.getElementById('customFontFile');
            if (customFontInput) {
                customFontInput.addEventListener('change', handleFontUpload);
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            const password = document.getElementById('password').value;
            
            if (password === CONFIG.PASSWORD) {
                currentUser = {
                    loggedIn: true,
                    loginTime: new Date().toISOString()
                };
                localStorage.setItem(CONFIG.SESSION_KEY, JSON.stringify(currentUser));
                showApp();
            } else {
                alert('Contrase√±a incorrecta. Intente nuevamente.');
            }
        }

        function handleLogout() {
            if (confirm('¬øEst√° seguro de que desea cerrar sesi√≥n?')) {
                localStorage.removeItem(CONFIG.SESSION_KEY);
                currentUser = null;
                showLogin();
            }
        }

        function switchSection(sectionId) {
            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-target="${sectionId}"]`).classList.add('active');
            
            // Mostrar secci√≥n
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        function previewImage(input, previewId) {
            const preview = document.getElementById(previewId);
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                    updateCardPreview();
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Manejar subida de archivos de fuentes
        function handleFontUpload(e) {
            const file = e.target.files[0];
            if (!file) return;

            // Verificar que sea un archivo de fuente
            const validExtensions = ['.ttf', '.otf', '.woff', '.woff2'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
            
            if (!validExtensions.includes(fileExtension)) {
                alert('Por favor, sube un archivo de fuente v√°lido (.ttf, .otf, .woff, .woff2)');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                const fontData = event.target.result;
                const fontName = file.name.split('.')[0];
                
                // Crear una fuente personalizada
                const fontFace = new FontFace(fontName, `url(${fontData})`);
                
                fontFace.load().then(function(loadedFace) {
                    document.fonts.add(loadedFace);
                    
                    // Actualizar el select de fuentes
                    const fontSelect = document.getElementById('fontFamily');
                    const existingOption = Array.from(fontSelect.options).find(opt => opt.value.includes(fontName));
                    
                    if (!existingOption) {
                        const newOption = new Option(fontName, `'${fontName}', sans-serif`);
                        fontSelect.add(newOption);
                    }
                    
                    // Seleccionar la nueva fuente
                    fontSelect.value = `'${fontName}', sans-serif`;
                    
                    // Actualizar vista previa
                    updateCardPreview();
                    
                    alert(`Fuente "${fontName}" cargada correctamente`);
                }).catch(function(error) {
                    console.error('Error loading font:', error);
                    alert('Error al cargar la fuente. Intenta con otro archivo.');
                });
            };
            
            reader.readAsDataURL(file);
        }

        // Cargar fuentes personalizadas desde URL
        function loadCustomFontFromUrl(fontUrl, fontFamily) {
            if (!fontUrl) return;
            
            // Verificar si ya existe un enlace para esta fuente
            let existingLink = document.querySelector(`link[href="${fontUrl}"]`);
            if (!existingLink) {
                // Crear nuevo enlace para la fuente
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = fontUrl;
                document.head.appendChild(link);
                
                // Esperar a que cargue la fuente
                link.onload = function() {
                    console.log('Fuente personalizada cargada:', fontUrl);
                };
            }
        }

        function updateCardPreview() {
            // Actualizar informaci√≥n b√°sica
            updateTextPreview('name', 'previewName');
            updateTextPreview('title', 'previewTitle');
            updateTextPreview('company', 'previewCompany');
            updateTextPreview('description', 'previewDescription');
            
            // Actualizar im√°genes
            updateImagePreview('logoPreview', 'previewLogo');
            updateImagePreview('profilePreview', 'previewProfile');
            
            // Actualizar estilos
            updateStyles();
            
            // Actualizar botones de contacto
            updateContactButtons();
            
            // Actualizar redes sociales
            updateSocialMedia();
            
            // Actualizar URL personalizada
            updateCustomURL();
        }

        function updateTextPreview(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            if (input && preview) {
                const value = input.value.trim();
                if (value) {
                    preview.textContent = value;
                } else {
                    // Texto por defecto
                    switch(previewId) {
                        case 'previewName': preview.textContent = 'Nombre Completo'; break;
                        case 'previewTitle': preview.textContent = 'T√≠tulo/Cargo'; break;
                        case 'previewCompany': preview.textContent = 'Empresa'; break;
                        case 'previewDescription': preview.textContent = 'Descripci√≥n de la empresa o usuario aparecer√° aqu√≠.'; break;
                    }
                }
            }
        }

        function updateImagePreview(sourceId, targetId) {
            const source = document.getElementById(sourceId);
            const target = document.getElementById(targetId);
            
            if (source && target && source.src) {
                target.src = source.src;
                target.style.display = 'block';
            } else {
                target.style.display = 'none';
            }
        }

        function updateStyles() {
            const cardPreview = document.getElementById('cardPreview');
            if (!cardPreview) return;
            
            // Colores
            cardPreview.style.backgroundColor = document.getElementById('cardBackground').value;
            cardPreview.style.color = document.getElementById('textPrimary').value;
            
            // Tipograf√≠a
            const fontFamily = document.getElementById('fontFamily').value;
            const customFont = document.getElementById('customFont').value;
            
            if (customFont) {
                // Cargar fuente personalizada
                loadCustomFontFromUrl(customFont, fontFamily);
            }
            cardPreview.style.fontFamily = fontFamily;
            
            // Tama√±os de texto
            const nameSize = document.getElementById('nameSize').value + 'px';
            const titleSize = document.getElementById('titleSize').value + 'px';
            const descriptionSize = document.getElementById('descriptionSize').value + 'px';
            
            document.getElementById('previewName').style.fontSize = nameSize;
            document.getElementById('previewTitle').style.fontSize = titleSize;
            document.getElementById('previewDescription').style.fontSize = descriptionSize;
            
            // Colores de texto
            const textPrimary = document.getElementById('textPrimary').value;
            const textSecondary = document.getElementById('textSecondary').value;
            const accentColor = document.getElementById('accentColor').value;
            
            document.getElementById('previewName').style.color = textPrimary;
            document.getElementById('previewTitle').style.color = textSecondary;
            document.getElementById('previewCompany').style.color = accentColor;
            
            // Estilo de la foto de perfil
            const profileShape = document.getElementById('profileShape').value;
            const profileSize = document.getElementById('profileSize').value + 'px';
            const profileImg = document.getElementById('previewProfile');
            
            if (profileImg) {
                if (profileShape === 'circular') {
                    profileImg.classList.remove('square');
                    profileImg.classList.add('circular');
                    profileImg.style.borderRadius = '50%';
                } else {
                    profileImg.classList.remove('circular');
                    profileImg.classList.add('square');
                    profileImg.style.borderRadius = '10px';
                }
                
                // Aplicar el tama√±o personalizado
                profileImg.style.width = profileSize;
                profileImg.style.height = profileSize;
                profileImg.style.objectFit = 'cover';
                
                // Aplicar borde con color de acento
                profileImg.style.border = `3px solid ${accentColor}`;
            }
        }

        function updateContactButtons() {
            const contactButtonsBlock = document.getElementById('previewContactButtons');
            if (!contactButtonsBlock) return;
            
            contactButtonsBlock.innerHTML = '';
            
            const contactData = [
                { id: 'phone', label: 'Tel√©fono Fijo', icon: 'üìû' },
                { id: 'mobile', label: 'Tel√©fono M√≥vil', icon: 'üì±' },
                { id: 'email', label: 'Correo Electr√≥nico', icon: '‚úâÔ∏è' },
                { id: 'address', label: 'Direcci√≥n', icon: 'üìç' }
            ];
            
            contactData.forEach(item => {
                const input = document.getElementById(item.id);
                if (input && input.value.trim()) {
                    const button = document.createElement('a');
                    button.className = 'contact-button';
                    button.href = getContactLink(item.id, input.value);
                    button.innerHTML = `
                        <span style="display: flex; align-items: center;">
                            <span class="contact-icon">${item.icon}</span>
                            <span>${item.label}: ${input.value}</span>
                        </span>
                        <span class="icon-chevron-right"></span>
                    `;
                    contactButtonsBlock.appendChild(button);
                }
            });
            
            // Si no hay botones, mostrar mensaje
            if (contactButtonsBlock.children.length === 0) {
                const message = document.createElement('p');
                message.textContent = 'Agrega informaci√≥n de contacto en el formulario';
                message.style.textAlign = 'center';
                message.style.color = '#7f8c8d';
                contactButtonsBlock.appendChild(message);
            }
        }

        function getContactLink(type, value) {
            switch(type) {
                case 'phone':
                case 'mobile':
                    return `tel:${value.replace(/\s/g, '')}`;
                case 'email':
                    return `mailto:${value}`;
                case 'address':
                    return `https://maps.google.com/?q=${encodeURIComponent(value)}`;
                default:
                    return '#';
            }
        }

        function updateSocialMedia() {
            const socialMediaBlock = document.getElementById('previewSocialMedia');
            if (!socialMediaBlock) return;
            
            socialMediaBlock.innerHTML = '';
            
            // Funci√≥n para crear iconos de redes sociales
            const createSocialIcon = (iconSvg, href, platform) => {
                const link = document.createElement('a');
                link.href = href;
                link.target = '_blank';
                link.className = 'social-media-icon';
                link.title = platform;
                link.innerHTML = iconSvg;
                
                return link;
            };
            
            // Iconos SVG modernos para redes sociales
            const websiteIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#3498db" stroke-width="2"/>
                <path d="M2 12H22" stroke="#3498db" stroke-width="2"/>
                <path d="M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22C9.49872 19.2616 8.07725 15.708 8 12C8.07725 8.29203 9.49872 4.73835 12 2V2Z" stroke="#3498db" stroke-width="2"/>
            </svg>`;

            const linkedinIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 8C17.5913 8 19.1174 8.63214 20.2426 9.75736C21.3679 10.8826 22 12.4087 22 14V21H18V14C18 13.4696 17.7893 12.9609 17.4142 12.5858C17.0391 12.2107 16.5304 12 16 12C15.4696 12 14.9609 12.2107 14.5858 12.5858C14.2107 12.9609 14 13.4696 14 14V21H10V14C10 12.4087 10.6321 10.8826 11.7574 9.75736C12.8826 8.63214 14.4087 8 16 8Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M6 9H2V21H6V9Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M4 6C5.10457 6 6 5.10457 6 4C6 2.89543 5.10457 2 4 2C2.89543 2 2 2.89543 2 4C2 5.10457 2.89543 6 4 6Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`;

            const facebookIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`;

            const instagramIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 2H7C4.23858 2 2 4.23858 2 7V17C2 19.7614 4.23858 21 7 21H17C19.7614 21 21 19.7614 21 17V7C21 4.23858 19.7614 2 17 2Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 11.37C16.1234 12.2022 15.9813 13.0522 15.5938 13.799C15.2063 14.5458 14.5932 15.1514 13.8416 15.5297C13.0901 15.9079 12.2385 16.0396 11.4078 15.9059C10.5771 15.7723 9.80977 15.3801 9.21485 14.7852C8.61993 14.1902 8.22774 13.4229 8.09408 12.5922C7.96042 11.7615 8.09208 10.9099 8.47034 10.1584C8.8486 9.40685 9.4542 8.79374 10.201 8.40624C10.9478 8.01874 11.7978 7.87659 12.63 8C13.4789 8.12588 14.2649 8.52146 14.8717 9.1283C15.4785 9.73515 15.8741 10.5211 16 11.37Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M17.5 6.5H17.51" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`;

            const twitterIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23 3C22.0424 3.67548 20.9821 4.19211 19.86 4.53C19.2577 3.83751 18.4573 3.34669 17.567 3.12393C16.6767 2.90116 15.7395 2.9572 14.8821 3.28445C14.0247 3.61171 13.2884 4.1944 12.773 4.95372C12.2575 5.71303 11.9877 6.61234 12 7.53V8.53C10.2426 8.57557 8.50127 8.18581 6.93101 7.39545C5.36074 6.60508 4.01032 5.43864 3 4C3 4 -1 13 8 17C5.94053 18.398 3.48716 19.0989 1 19C10 24 21 19 21 7.5C20.9991 7.22145 20.9723 6.94359 20.92 6.67C21.9406 5.66349 22.6608 4.39271 23 3V3Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`;

            const youtubeIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.54 6.42C22.4212 5.94541 22.1793 5.51057 21.8387 5.15941C21.4981 4.80824 21.0708 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.12 4 3.4 4.46C2.92925 4.59318 2.50193 4.84824 2.1613 5.19941C1.82068 5.55057 1.57875 5.98541 1.46 6.46C1.14521 8.20556 0.991236 9.97631 1 11.75C0.991236 13.5237 1.14521 15.2944 1.46 17.04C1.59096 17.4848 1.8383 17.8836 2.17814 18.1995C2.51799 18.5154 2.93882 18.7375 3.4 18.84C5.12 19.3 12 19.3 12 19.3C12 19.3 18.88 19.3 20.6 18.84C21.0708 18.7068 21.4981 18.4518 21.8387 18.1006C22.1793 17.7494 22.4212 17.3146 22.54 16.84C22.8524 15.0944 23.0063 13.3237 22.9987 11.55C23.0223 9.77197 22.8683 7.99611 22.54 6.42V6.42Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9.75 15.02L15.5 11.75L9.75 8.48V15.02Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`;

            const whatsappIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3944 16.7118 18.3098 17.8992 16.9674 18.7293C15.6251 19.5594 14.0782 19.9994 12.5 20C11.1801 20.0035 9.87812 19.6951 8.7 19.1L3 21L4.9 15.3C4.30493 14.1219 3.99656 12.8199 4 11.5C4.00061 9.92179 4.44061 8.37488 5.27072 7.03258C6.10083 5.69028 7.28825 4.6056 8.7 3.90003C9.87812 3.30496 11.1801 2.99659 12.5 3.00003H13C15.0843 3.11502 17.053 3.99479 18.5291 5.47089C20.0052 6.94699 20.885 8.91568 21 11V11.5Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`;
            
            // Agregar iconos seg√∫n los datos disponibles
            const website = document.getElementById('website').value;
            const linkedin = document.getElementById('linkedin').value;
            const facebook = document.getElementById('facebook').value;
            const instagram = document.getElementById('instagram').value;
            const twitter = document.getElementById('twitter').value;
            const youtube = document.getElementById('youtube').value;
            const whatsapp = document.getElementById('whatsapp').value;
            
            if (website) {
                socialMediaBlock.appendChild(
                    createSocialIcon(websiteIcon, website, 'Sitio Web')
                );
            }
            
            if (linkedin) {
                socialMediaBlock.appendChild(
                    createSocialIcon(linkedinIcon, linkedin, 'LinkedIn')
                );
            }
            
            if (facebook) {
                socialMediaBlock.appendChild(
                    createSocialIcon(facebookIcon, facebook, 'Facebook')
                );
            }
            
            if (instagram) {
                socialMediaBlock.appendChild(
                    createSocialIcon(instagramIcon, instagram, 'Instagram')
                );
            }
            
            if (twitter) {
                socialMediaBlock.appendChild(
                    createSocialIcon(twitterIcon, twitter, 'Twitter/X')
                );
            }
            
            if (youtube) {
                socialMediaBlock.appendChild(
                    createSocialIcon(youtubeIcon, youtube, 'YouTube')
                );
            }
            
            if (whatsapp) {
                socialMediaBlock.appendChild(
                    createSocialIcon(whatsappIcon, `https://wa.me/${whatsapp}`, 'WhatsApp')
                );
            }
            
            // Si no hay redes sociales, mostrar mensaje
            if (socialMediaBlock.children.length === 0) {
                const noSocial = document.createElement('p');
                noSocial.textContent = 'No hay redes sociales';
                noSocial.style.textAlign = 'center';
                noSocial.style.color = '#7f8c8d';
                noSocial.style.width = '100%';
                socialMediaBlock.appendChild(noSocial);
            }
        }

        // Funci√≥n para actualizar URL en vista previa
        function updateCustomURL() {
            const nameInput = document.getElementById('name');
            const previewUrl = document.getElementById('previewUrl');
            
            if (nameInput && previewUrl) {
                const name = nameInput.value.trim();
                
                if (name) {
                    const urlName = generateUrlName(name);
                    // Mostrar URL completa que funcionar√°
                    previewUrl.textContent = `${window.location.origin}${window.location.pathname}#${urlName}`;
                } else {
                    previewUrl.textContent = `${window.location.origin}${window.location.pathname}#tu-nombre`;
                }
            }
        }

        // Funci√≥n auxiliar para generar nombres de URL amigables
        function generateUrlName(name) {
            return name.toLowerCase()
                .replace(/[√°√†√§√¢]/g, 'a')
                .replace(/[√©√®√´√™]/g, 'e')
                .replace(/[√≠√¨√Ø√Æ]/g, 'i')
                .replace(/[√≥√≤√∂√¥]/g, 'o')
                .replace(/[√∫√π√º√ª]/g, 'u')
                .replace(/√±/g, 'n')
                .replace(/[^a-z0-9]/g, '-')
                .replace(/-+/g, '-')
                .replace(/^-|-$/g, '');
        }

        function handleCardSubmit(e) {
            e.preventDefault();
            
            // Generar URL personalizada basada en el nombre
            const name = document.getElementById('name').value.trim();
            const urlName = name ? generateUrlName(name) : 'tarjeta-' + Date.now();
            
            // Obtener datos del formulario
            const cardData = {
                id: editingCardId || Date.now().toString(),
                name: name,
                title: document.getElementById('title').value,
                company: document.getElementById('company').value,
                description: document.getElementById('description').value,
                phone: document.getElementById('phone').value,
                mobile: document.getElementById('mobile').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                website: document.getElementById('website').value,
                linkedin: document.getElementById('linkedin').value,
                facebook: document.getElementById('facebook').value,
                instagram: document.getElementById('instagram').value,
                twitter: document.getElementById('twitter').value,
                youtube: document.getElementById('youtube').value,
                whatsapp: document.getElementById('whatsapp').value,
                design: {
                    cardBackground: document.getElementById('cardBackground').value,
                    textPrimary: document.getElementById('textPrimary').value,
                    textSecondary: document.getElementById('textSecondary').value,
                    accentColor: document.getElementById('accentColor').value,
                    fontFamily: document.getElementById('fontFamily').value,
                    nameSize: document.getElementById('nameSize').value,
                    titleSize: document.getElementById('titleSize').value,
                    descriptionSize: document.getElementById('descriptionSize').value,
                    profileShape: document.getElementById('profileShape').value,
                    profileSize: document.getElementById('profileSize').value,
                    customFont: document.getElementById('customFont').value
                },
                // La URL ahora es solo el nombre para el hash
                url: urlName,
                createdAt: editingCardId ? getCardById(editingCardId).createdAt : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // Procesar im√°genes
            const logoInput = document.getElementById('logo');
            const profileInput = document.getElementById('profileImage');
            
            if (logoInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    cardData.logo = e.target.result;
                    saveCard(cardData);
                };
                reader.readAsDataURL(logoInput.files[0]);
            } else if (editingCardId) {
                const existingCard = getCardById(editingCardId);
                cardData.logo = existingCard.logo;
            }
            
            if (profileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    cardData.profileImage = e.target.result;
                    saveCard(cardData);
                };
                reader.readAsDataURL(profileInput.files[0]);
            } else if (editingCardId) {
                const existingCard = getCardById(editingCardId);
                cardData.profileImage = existingCard.profileImage;
            }
            
            // Si no hay im√°genes nuevas, guardar directamente
            if ((!logoInput.files[0] && !profileInput.files[0]) || editingCardId) {
                saveCard(cardData);
            }
        }

        function saveCard(cardData) {
            if (editingCardId) {
                // Actualizar tarjeta existente
                const index = cards.findIndex(card => card.id === editingCardId);
                if (index !== -1) {
                    cards[index] = cardData;
                }
            } else {
                // Agregar nueva tarjeta
                cards.push(cardData);
            }
            
            localStorage.setItem(CONFIG.CARDS_KEY, JSON.stringify(cards));
            updateCardsTable();
            resetForm();
            alert(editingCardId ? 'Tarjeta actualizada correctamente' : 'Tarjeta creada correctamente');
            
            // Cambiar a la secci√≥n de Mis Tarjetas
            switchSection('my-cards');
        }

        function loadCards() {
            const storedCards = localStorage.getItem(CONFIG.CARDS_KEY);
            if (storedCards) {
                try {
                    cards = JSON.parse(storedCards);
                } catch (e) {
                    console.error('Error parsing stored cards:', e);
                    cards = [];
                }
            } else {
                cards = [];
            }
        }

        function getCardById(id) {
            return cards.find(card => card.id === id);
        }

        function updateCardsTable() {
            const tableBody = document.getElementById('cardsTableBody');
            if (!tableBody) return;
            
            tableBody.innerHTML = '';
            
            if (cards.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem;">
                            No hay tarjetas creadas a√∫n. <a href="#" class="nav-link" data-target="home">Crea tu primera tarjeta</a>
                        </td>
                    </tr>
                `;
                return;
            }
            
            cards.forEach(card => {
                const row = document.createElement('tr');
                
                // URL completa que funcionar√°
                const fullUrl = `${window.location.origin}${window.location.pathname}#${card.url}`;
                
                row.innerHTML = `
                    <td>${card.name || 'Sin nombre'}</td>
                    <td><a href="${fullUrl}" target="_blank">${fullUrl}</a></td>
                    <td>${formatDate(card.createdAt)}</td>
                    <td>${formatDate(card.updatedAt)}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="editCard('${card.id}')">Editar</button>
                            <button class="btn btn-danger" onclick="deleteCard('${card.id}')">Eliminar</button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES');
        }

        function editCard(id) {
            const card = getCardById(id);
            if (!card) return;
            
            editingCardId = id;
            
            // Cambiar a la secci√≥n de inicio
            switchSection('home');
            
            // Mostrar secci√≥n de creaci√≥n
            document.getElementById('creationSection').style.display = 'block';
            document.getElementById('startCreatingBtn').style.display = 'none';
            document.querySelector('.hero-section').style.display = 'none';
            
            // Actualizar t√≠tulo del formulario
            document.getElementById('formTitle').textContent = 'Editar Tarjeta';
            
            // Mostrar bot√≥n de cancelar
            document.getElementById('cancelEditButton').style.display = 'block';
            
            // Llenar formulario con datos de la tarjeta
            document.getElementById('name').value = card.name || '';
            document.getElementById('title').value = card.title || '';
            document.getElementById('company').value = card.company || '';
            document.getElementById('description').value = card.description || '';
            document.getElementById('phone').value = card.phone || '';
            document.getElementById('mobile').value = card.mobile || '';
            document.getElementById('email').value = card.email || '';
            document.getElementById('address').value = card.address || '';
            document.getElementById('website').value = card.website || '';
            document.getElementById('linkedin').value = card.linkedin || '';
            document.getElementById('facebook').value = card.facebook || '';
            document.getElementById('instagram').value = card.instagram || '';
            document.getElementById('twitter').value = card.twitter || '';
            document.getElementById('youtube').value = card.youtube || '';
            document.getElementById('whatsapp').value = card.whatsapp || '';
            
            // Llenar datos de dise√±o
            if (card.design) {
                document.getElementById('cardBackground').value = card.design.cardBackground || '#ffffff';
                document.getElementById('textPrimary').value = card.design.textPrimary || '#2c3e50';
                document.getElementById('textSecondary').value = card.design.textSecondary || '#7f8c8d';
                document.getElementById('accentColor').value = card.design.accentColor || '#3498db';
                document.getElementById('fontFamily').value = card.design.fontFamily || 'Arial, sans-serif';
                document.getElementById('nameSize').value = card.design.nameSize || '24';
                document.getElementById('titleSize').value = card.design.titleSize || '16';
                document.getElementById('descriptionSize').value = card.design.descriptionSize || '14';
                document.getElementById('profileShape').value = card.design.profileShape || 'circular';
                document.getElementById('profileSize').value = card.design.profileSize || '150';
                document.getElementById('customFont').value = card.design.customFont || '';
            }
            
            // Mostrar im√°genes
            if (card.logo) {
                document.getElementById('logoPreview').src = card.logo;
                document.getElementById('logoPreview').style.display = 'block';
            }
            
            if (card.profileImage) {
                document.getElementById('profilePreview').src = card.profileImage;
                document.getElementById('profilePreview').style.display = 'block';
            }
            
            // Actualizar vista previa
            updateCardPreview();
            
            // Cambiar texto del bot√≥n de env√≠o
            document.getElementById('submitButton').textContent = 'Actualizar Tarjeta';
        }

        function deleteCard(id) {
            if (confirm('¬øEst√° seguro de que desea eliminar esta tarjeta?')) {
                cards = cards.filter(card => card.id !== id);
                localStorage.setItem(CONFIG.CARDS_KEY, JSON.stringify(cards));
                updateCardsTable();
            }
        }

        function resetForm() {
            document.getElementById('cardForm').reset();
            editingCardId = null;
            
            // Restablecer dise√±o por defecto
            setupDefaultDesign();
            
            // Ocultar vistas previas de im√°genes
            document.getElementById('logoPreview').style.display = 'none';
            document.getElementById('profilePreview').style.display = 'none';
            
            // Restablecer t√≠tulo del formulario
            document.getElementById('formTitle').textContent = 'Crear Nueva Tarjeta';
            
            // Ocultar bot√≥n de cancelar
            document.getElementById('cancelEditButton').style.display = 'none';
            
            // Restablecer texto del bot√≥n de env√≠o
            document.getElementById('submitButton').textContent = 'Crear Tarjeta';
            
            // Actualizar vista previa
            updateCardPreview();
        }

        // Hacer funciones globales para los onclick
        window.editCard = editCard;
        window.deleteCard = deleteCard;
        window.showCreationForm = showCreationForm;
        window.showHomeSection = showHomeSection;
    </script>
</body>
</html>